<% content_for :title, "Email Audiences" %>

<p style="color: green"><%= notice %></p>
<p style="color: red"><%= alert %></p>

<h1>Email Audiences</h1>

<% if @audiences.any? %>
  <table style="width: 100%; border-collapse: collapse; margin-top: 12px;">
    <thead>
      <tr style="border-bottom: 2px solid #ddd;">
        <th style="text-align: left; padding: 8px;">Name</th>
        <th style="text-align: left; padding: 8px;">Recipients</th>
        <th style="text-align: left; padding: 8px;">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @audiences.each do |audience| %>
        <tr style="border-bottom: 1px solid #eee;">
          <td style="padding: 8px;"><%= audience.name %></td>
          <td style="padding: 8px;"><%= audience.email_list.length %> recipient<%= audience.email_list.length == 1 ? "" : "s" %></td>
          <td style="padding: 8px;">
            <%= link_to "Edit", edit_email_audience_path(audience) %> |
            <%= button_to "Delete", audience, method: :delete, data: { confirm: "Are you sure?" }, style: "background: none; border: none; color: #c00; cursor: pointer; padding: 0;" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p><em>No Email audiences yet.</em></p>
<% end %>

<p style="margin-top: 16px;">
  <%= link_to "New Email Audience", new_email_audience_path %>
</p>
